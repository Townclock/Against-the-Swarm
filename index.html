<html> 
<head><title> Against The Swarm </title>
<link rel="stylesheet" type="text/css" href="gui.css">
</head>

<script src="js/vue.js"></script>

<script src="js/player.js"></script>
<script src="js/monster.js"></script>
<script src="js/town.js"></script>
<script src="js/player_inventory.js"></script>
<script src="js/gui.js"></script>
<script src="js/game_logic.js"></script>
<script src="js/follower.js"></script>
<script> 
    //every variable or function that wants to be called from html has to have reference in //Vue function
    window.onload = function(){
        var vm = new Vue({
            el: "#vue-div",
            data: {
                fighters: towns,
                monsterss: monsters,

                current_monster:null,
                current_fighter:null,
            }
        });
    };

    var player = new Player();
    var monster = new Monster("zerg",420);
    var monsters = [monster,
                    new Monster("protoss",312),
                    new Monster("tassadar",111),
                    new Monster("terran",132)];
    var fighters = [];
    var player_inventory = new Player_Inventory;

    var follower = new Follower(player);
    function click_fight_button(){fight(player, monsters);}
    function click_rest_button(){rest(player, monsters);}
    function click_engage_button(){engage(player, monsters)};
    function click_disengage_button(){disengage(player, monsters)};


    
    var timer = setInterval(function(){
        update_ui(player, monster);

        if (! under_siege) {
            invasion_progress += invasion_rate;
            increment_follower_resource(current_town);
            follower.followers_act();
            follower.pay_followers();

            if (invasion_progress > towns[current_town].location){
            	under_siege = true;
	        //change_town(player);
		//alert('you did not save this town. We must retreat!');
            }
        }
    }
        , 1000);

    var gui_update = setInterval(function(){
        update_ui(player, monsters[0]);
    }, 17);

</script>

<body><div id="vue-div">

    <div class="invasion_bar">
        <div class="invasion" id="invasion" style="width:0px"></div>
    </div>
    <div id="towns"> </div>

<!--.......................vue code......................................-->
    <div v-if="current_monster != null">
        Current Monster has {{current_monster.hp}} hp
    </div>
    <div v-for="m in monsterss">
        <div v-on:click="current_monster = m">{{m.monster_name}} hp: {{m.hp}}</div>
    </div>


<div id="technology_list"></div>
    <div id="panel_track">
    <div class="left" id="town_panel">
        <div class="column_1">
            <p> FOLLOWERS <span id="follower_resource"></span></p>
            
            <div class="follower_row"> 
                Processors: <span id="number_of_processors"></span> 
                <div class="completion_bar">
                    <div class="completion" id="processor_bar"></div>
                </div>
            </div>

            <div>
                <div class="column_2">
                    <button class="button town_button" onclick="click_rest_button()"> "REST!" </button>
            </div>
                <div class="column_2">
                    <button class="button town_button" onclick="click_engage_button()"> "ENGAGE!" </button>
                </div>
            </div>
        </div>
        <div class="column_1">
            <p> RESOURCES </p>

            <div>
                <div class="column_2">
                    <p>Meat: <span id="meat">0</span></p>
                    <p>Scales: <span id="scales">0</span></p>
                    <p>Claws: <span id="claws">0</span></p>
                 </div>
                <div class="column_2">
                    <p>Fiber: <span id="fiber">0</span></p>
                    <p>Metal: <span id="metal">0</span></p>
                    <p>Gelatin: <span id="gelatin">0</span></p>
                </div>
            </div>
        </div>
    </div>
    <div class="center">

        <div class="column_3 left">
		  
            <p>Level: <span id="player_level">1</span>
                (<span id="exp_counter"> 0 </span>
                / <span id="exp_until_level">1</span>)
            </p>
            <div class="experience_bar" id="player_experience_bar">
                <div class="experience" id="player_experience" style="width:0px"></div>


            </div>
            <div class="health_bar" id="player_health_bar">
                <div class="health" id="player_health"></div>
            </div>
            <button class="button combat_button" onclick="click_fight_button()"> "FIGHT!" </button>
            <button class="button combat_button" onclick="click_disengage_button()"> "DISENGAGE!" </button>
        </div>
        <div class="column_3"> </div>
        <div class="column_3 right"> 
            <div class="health_bar" id="monster_health_bar">
                <div class="health" id="monster_health"></div>
            </div>
            <div class="monster"></monster>
        </div>
    </div>
    </div>
<div class="right">
    </div>
</html>
